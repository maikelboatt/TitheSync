<views:MvxWpfView x:Class="TitheSync.UI.Forms.Payments.PaymentDetailsForm"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:payments="clr-namespace:TitheSync.Core.ViewModels.Payments;assembly=TitheSync.Core"
                  xmlns:views="clr-namespace:MvvmCross.Platforms.Wpf.Views;assembly=MvvmCross.Platforms.Wpf"
                  d:DataContext="{d:DesignInstance d:Type=payments:PaymentDetailsFormViewModel,
                                                   IsDesignTimeCreatable=True}"
                  d:DesignHeight="auto"
                  d:DesignWidth="auto"
                  FontFamily="Raleway"
                  mc:Ignorable="d">
    <!--  Main container grid for the Payment Listing UI  -->
    <Border Background="{DynamicResource TertiaryBackgroundColor}">
        <Grid Margin="30,20">
            <!--  Grid displayed when data loading is complete  -->
            <Grid>
                <Grid Margin="3">
                    <!--  Row definitions for the header and content sections  -->
                    <Grid.RowDefinitions>
                        <RowDefinition Height="50" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!--  Header section containing search and action buttons  -->
                    <Grid Grid.Row="0" FlowDirection="RightToLeft">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20" />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <!--  Close button  -->
                        <Button Grid.Column="0"
                                Command="{Binding CloseCommand}"
                                Content="{DynamicResource Close}"
                                Style="{StaticResource IconButtonsStyle}" />

                        <!--  Button to open the add-payment dialog  -->
                        <Button Grid.Column="1"
                                Width="100"
                                Margin="30,0"
                                HorizontalAlignment="Right"
                                Command="{Binding OpenAddDialogCommand}"
                                IsDefault="True"
                                Style="{DynamicResource CreateBtn}">
                            <iconPacks:PackIconMaterial Kind="AccountPlusOutline" Style="{StaticResource IconButtonIcon}" />
                        </Button>

                        <!--  Name of the member  -->
                        <TextBlock Grid.Column="2"
                                   HorizontalAlignment="Left"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource TertiaryTextColor}"
                                   Text="{Binding FullName}"
                                   TextAlignment="Center" />

                    </Grid>

                    <!--  DataGrid displaying the list of members  -->
                    <DataGrid Grid.Row="1"
                              MaxWidth="700"
                              Background="{DynamicResource SecondaryBackgroundColor}"
                              CellStyle="{StaticResource DataGridCellStyle1}"
                              ColumnHeaderStyle="{StaticResource DataGridColumnHeaderStyle1}"
                              ItemsSource="{Binding Payments, UpdateSourceTrigger=PropertyChanged}"
                              RowStyle="{StaticResource DataGridRowStyle1}"
                              Style="{DynamicResource DataGridStyle1}"
                              VerticalScrollBarVisibility="Auto">
                        <DataGrid.Columns>

                            <!--  Column displaying the payment amount  -->
                            <DataGridTextColumn Width="*"
                                                Binding="{Binding Amount, StringFormat='₵{0:N2}'}"
                                                CanUserResize="False"
                                                Header="Amount Paid"
                                                IsReadOnly="True" />

                            <!--  Column displaying the payment date  -->
                            <DataGridTextColumn Width="*"
                                                Binding="{Binding DatePaid, Converter={StaticResource LongDateConverter}, StringFormat='{}{0:dd/MM/yyyy}'}"
                                                CanUserResize="False"
                                                Header="Payment Date "
                                                IsReadOnly="True" />

                            <!--  Column containing operation buttons for each payment  -->
                            <DataGridTemplateColumn Width="auto"
                                                    Header="Operations"
                                                    IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">

                                            <!--  Button to open the payment add dialog for a payment  -->
                                            <Button Margin="0,0,5,0"
                                                    Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=DataContext.OpenUpdateDialogCommand}"
                                                    CommandParameter="{Binding PaymentId}"
                                                    Style="{DynamicResource EditBtn}">
                                                <iconPacks:PackIconMaterial Kind="CashEdit" Style="{StaticResource IconButtonIcon}" />
                                            </Button>

                                            <!--  Button to open the details dialog for a payment  -->
                                            <Button Margin="0,0,5,0"
                                                    Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=DataContext.OpenDeleteDialogCommand}"
                                                    CommandParameter="{Binding PaymentId}"
                                                    IsDefault="True"
                                                    Style="{DynamicResource DelBtn}">
                                                <iconPacks:PackIconMaterial Kind="DeleteOutline" Style="{StaticResource IconButtonIcon}" />
                                            </Button>

                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Grid>
        </Grid>
    </Border>

</views:MvxWpfView>